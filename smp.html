<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
        crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
   
    <link rel="stylesheet" href="css/smp.css"/>
    
   
</head>

<body>
    <div class="body" id="rnav">
            <div class="container" >
                    <div class="d-flex flex-row"  >
                        <img src="https://i.pinimg.com/564x/5d/94/ff/5d94fff22565a8f3722fc5c0a9a55c45.jpg" alt="" width="60" height="60" >
                             
                     <div class="container-fluid">
                      <nav class="main_nav navbar navbar-expand-lg  ">
                            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                            </button>
                                    <a class="navbar-brand g" href="#">GITAM Blood <br>Donation</a>
                             <div class="collapse navbar-collapse " id="navbarNav">
                                <ul class="navbar-nav ">
                                    <li><a class="nav-link active n" href="homepage.html">Homepage</a></li>
                                    <li> <a class="nav-link active n" href="#">Service</a></li>
                                    <li><a class="nav-link active n"  href="#">Contact </a></li>
                                  <li><a class="nav-link active n" href="request.html">Request Blood</a></li>
                                  <li><a class="nav-link active n" href="donate.html">Donate Blood</a></li>
                                  <li ><a class="nav-link active n" href="about us.html">About</a></li>
                                </ul>
                            </div>
                        </nav>
                        </div> 
                  </div>
                  <div class="card">
                    <h4 class="mb-4 pb-3 text-center">REQUEST BLOOD</h4>
                    <div class="d-flex flex-row">
                        
                        <div class="form-group col-6">
                            <input type="text" name="logname" class="form-style" placeholder="First name" id="logfname" autocomplete="off" >
                            <i class="input-icon uil uil-at"></i>
                        </div>
                        <div class="form-group col-6">
                            <input type="text" name="logname" class="form-style" placeholder="Last name" id="loglname" autocomplete="off">
                            <i class="input-icon uil uil-at"></i>
                        </div>
                    </div>
                    <div class="d-flex flex-row mt-2">
                        <div class=" col-6 form-group mt-2">
                            <input type="number" name="logage" class="form-style" placeholder="Age" id="logage" autocomplete="off" min=0 >
                            <i class="input-icon uil uil-lock-alt"></i>
                        </div>
                        <div class="form-group col-6 mt-2">
                            <input type="text" name="loggroup" class="form-style" placeholder="Blood Group" id="logbg" list="blood-group" autocomplete="off" >
                            <datalist id="blood-group">
                                <option>A+</option>
                                <option>A-</option>
                                <option>B+</option>
                                <option>B-</option>
                                <option>O+</option>
                                <option>O-</option>
                                <option>AB+</option>
                                <option>AB-</option>
                            </datalist>
                        </div>

                    </div>
                    <div class="form-group mt-2">
                        <input type="number" name="logage" class="form-style" placeholder="Phone no" id="logph" autocomplete="off" maxlength="10" >
                        <i class="input-icon uil uil-lock-alt"></i>
                    </div>
                    <div class="d-flex flex-row mt-2">
                        <div class="form-group col-6">
                            <input type="text" name="logname" class="form-style" placeholder="State" id="logst" list="logstate" autocomplete="off" >
                            <datalist id="logstate">
                                <option>Andhra Pradesh</option>
                                <option>Others</option>
                            </datalist>
                            <i class="input-icon uil uil-at"></i>
                        </div>
                        <div class="form-group col-6">
                            <input type="text" name="logname" class="form-style" placeholder="District" id="logdct" list="logdst" autocomplete="off" >
                            <datalist id="logdst">
                                <option>Vishakapatanam</option>
                                <option>Others</option>
                            </datalist>
                        </div>
                </div>
                    <div class="form-group mt-2">
                        <input type="text" name="logadd" class="form-style" placeholder="Hosipital Name" id="loghs" autocomplete="off" >
                        <i class="input-icon uil uil-lock-alt"></i>
                    </div>
                    <div class="form-group mt-2">
                        <input type="text" name="logadd" class="form-style" placeholder="Purpose" id="logpur" autocomplete="off" >
                        <i class="input-icon uil uil-lock-alt"></i>
                    </div>
                
                    
                    <button class="btn btn-primary  text-center b mt-3" id="request">Request</button>
                </div>
                </div>

<script type="module">
    // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
    
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.1/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.9.1/firebase-analytics.js";
      
      import { getDatabase, set, ref, update } from "https://www.gstatic.com/firebasejs/9.9.1/firebase-database.js";
      import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword} from "https://www.gstatic.com/firebasejs/9.9.1/firebase-auth.js";
      
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
    
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyAdO1240EGQj0s2HgEuLulySHlBBzm2fcc",
        authDomain: "g-b-d2.firebaseapp.com",
        databaseURL: "https://g-b-d2-default-rtdb.firebaseio.com",
        projectId: "g-b-d2",
        storageBucket: "g-b-d2.appspot.com",
        messagingSenderId: "852601687667",
        appId: "1:852601687667:web:8444d014a7c78ca0b3a406",
        measurementId: "G-NYJPSEE4PZ"
      };
    
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);
      const auth = getAuth();
    
      request.addEventListener('click',(e) => {
    {
        var userfname = document.getElementById("logfname").value;
    var userlname = document.getElementById("loglname").value;
    var Age = document.getElementById("logage").value;
    var userbloodgroup = document.getElementById("logbg").value;
    var userphone = document.getElementById("logph").value;
    var userstate = document.getElementById("logst").value;
    var userdisct = document.getElementById("logdct").value;
    var Hosipital = document.getElementById("loghs").value;
    var userpurpose = document.getElementById("logpur").value;
   

    function validatePhoneNumber(input_str) {
    var re = /^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/;

    return re.test(input_str);
}

    
    if (userfname != "")
    {
        if (Age != "")
        {
            if (userbloodgroup != "")
            {
                if (userphone != "")
                {
                    if (userstate != "")
                    {
                        if (userdisct != "")
                        {
                            if (Hosipital != "")
                            {
                                if (userpurpose == "")
                                {
                                    alert("enter Your Details");
                                }
                                else
                                {

                                }
                            }
                            else
                            {
                                alert("Enter Hosipital Name");

                            }
                            
                        }
                        else
                        {
                            alert("Select Your District");
                        }

                    }
                    else
                    {
                        alert("Select Your State");
                    }
                    
                }
                else
                {
                    alert("enter Your Phone No");
                }
            }
            else
            {
                alert("Select Your Blood Group");
            }
        }
        else
        {
            alert(" Enter Your age");
        }
    }
    else
    {
        alert("Enter Your Name");
    }
    if (userpurpose != "")
    {
        if(userstate=="Andhra Pradesh")
        {
            if(userdisct=="Vishakapatanam")
            {
                if (userfname.length >=6)
                {
                    if (Age>=18)
                    {
                        if (!validatePhoneNumber(userphone))
                        {
                            alert("please enter valid no");
                        }
                        else
                        {
                            set(ref(database, 'Requestlist/'+userphone),{
                                phoneno: userphone,
                                bloodgroup:userbloodgroup,
                                Age:Age,
                                name:userfname
                            })
                        alert('user requested!');
                        }
                    }
                    else
                    {
                        alert("Age sholud be >= 18");
                    }
                }
                else
                {
                    alert("Name sholud be atleast 6 letters");
                }
            }
            else
            {
                alert("Sorry we did not start out services there");
            }
        }              
        else
        {
            alert("Sorry we did not start out services there");
        }
         event.preventDefault();
        
    }
}

}); 


    
     </script>
    
</body>    
    
    
</html>